
<!-- 
	This is a test web-page for creating users. This is needed before users can submit POIs.
-->
<html>
<head>
	<title>Add your sweet free thing</title>
</head>
<body>
<form>
    <div>
        <label for="mail">Your E-mail:</label>
        <input type="email" id="email">
    </div>
    <div>
        <label for="name">Name of Sweet Free Thing:</label>
        <input type="text" id="name">
    </div>
     <div>
        <label for="name">What makes it sweet?</label>
        <input type="text" id="description">
    </div>
    <input type="button" id="submit-button" value="Submit">
</form>
<script>
	document.getElementById("submit-button").onclick = function () {
		console.log('hello!'); 
		var email = document.getElementById("email").value;
		var name = document.getElementById("name").value;
		var description = document.getElementById("description").value;
		data = {name: name, gps_lat: "10", gps_long: "10", distanceInMetres: 100, is_all_day: false, poi_url: "", description: description, categories: "", tags: "" }
	  	var xhr = new XMLHttpRequest();
	  	xhr.open('POST', '/v1/poi', true);
	  	xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
	  	xhr.setRequestHeader('Authorization', 'Basic ' + btoa(email + ":password"));

		xhr.onreadystatechange = function() {
		  if (xhr.readyState === 4) {
		      if (xhr.status === 200 || xhr.status === 204) {
		         alert('Successfully created poi');
		      } else {
		         alert('Failed to create poi');
		      }
		  }
		}

	  	xhr.send(JSON.stringify(data));
	};
</script>
</body>
</html>